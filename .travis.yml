sudo: false
language: python

addons:
  postgresql: "9.6"
  apt:
     packages:
     - postgresql-9.6-postgis-2.3

install:
  - pip install tox

before_script:
  - psql -c "CREATE USER test WITH PASSWORD 'test'" -U postgres postgres
  - psql -c "ALTER ROLE test SUPERUSER" -U postgres postgres
  - psql -c "CREATE DATABASE naovoce OWNER=test" -U postgres postgres
  - psql -c "CREATE EXTENSION postgis" -U postgres naovoce
  - psql -c "CREATE EXTENSION hstore" -U postgres naovoce
  - unset PYTHONPATH

script:
  - tox

after_success:
  - coveralls

matrix:
  include:
  - python: 3.5
    env: TOXENV=py35
  - python: 3.6
    env: TOXENV=py36
  - python: 3.6
    env: TOXENV=coala
  - python: 3.6
    env: TOXENV=pylint
