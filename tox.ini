[tox]
envlist = py{35,36,37},coala,pylint
skipsdist = True

[pytest]
DJANGO_SETTINGS_MODULE = naovoce.settings.test

[testenv]
setenv =
    PYTHONPATH = ./src
    DJANGO_SETTINGS_MODULE = naovoce.settings.test
deps =
    -rrequirements/base.txt
    -rrequirements/test.txt
commands =
    {toxinidir}/src/manage.py migrate
    pytest --cov=src tests {posargs:}

[testenv:coala]
setenv =
    PYTHONPATH =
deps =
    -rrequirements/lint.txt
commands =
    coala --non-interactive {posargs:}

[testenv:pylint]
deps =
    -rrequirements/base.txt
    -rrequirements/lint.txt
    -rrequirements/test.txt
commands =
    pylint {posargs:} src tests
